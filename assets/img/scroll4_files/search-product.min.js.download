(function(a){var e=null,t=null,c={active:!1,categories:[],products:[],count:0,countShow:!1,q:""},s="",o="";function n(){var e,t;c.active?(a(".ads-search-product").show(),a("body").addClass("ads-search-product--open")):(a(".ads-search-product").hide(),a("body").removeClass("ads-search-product--open")),c.active&&a(".ads-search-product").html((e=s,t=c,"undefined"!=typeof Handlebars&&Handlebars.compile(e)(t)))}function r(){a(".js-autocomplete-search").on("keyup",(function(){clearTimeout(t);var e=a(this).val();if(!(e.length<2)){var s=e.replace("‘","'");s=s.replace("’","'"),a(".js-autocomplete-search").val(s),t=setTimeout((function(){c.active=!0,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"medium";c.q=e,a.ajax({url:alidAjax.ajaxurl,type:"POST",dataType:"json",async:!0,data:{action:"ads_search_product",q:e,size:t},success:function(a){c.products=a.products,c.categories=a.categories,c.count=a.count,c.countShow=a.countShow,n()}})}(s,a(".js-autocomplete-search").attr("data-size"))}),300)}})),a(document).on("click",(function(e){a(e).closest(".ads-search-product").length||(c.active=!1,n())}))}return{start:function(){if(!e&&(e=this,a(".js-autocomplete-search").length))return a.ajax({url:alidAjax.ajaxurl,type:"POST",dataType:"json",async:!0,data:{action:"ads_search_product_template"},success:function(e){o=e.name,a("body").addClass(o.toLowerCase()),s=e.template}}),a(".js-autocomplete-search").parent().append('<div class="ads-search-product" style="display: none"><div>'),r(),this}}})(jQuery).start();